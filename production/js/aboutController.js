var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};define(["donateController"],function(a){var b;return b=function(){function b(){this.changeTranslationURL=__bind(this.changeTranslationURL,this),this.resizeTextarea=__bind(this.resizeTextarea,this),this.delayedResize=__bind(this.delayedResize,this),this.testEmail=__bind(this.testEmail,this),this.testContacts=__bind(this.testContacts,this),this.hideErr=__bind(this.hideErr,this),this.sendMessage=__bind(this.sendMessage,this);var b,c,d,e,f,g,h,i,j;if(__indexOf.call(document.createElement("template"),"content")<0)for(j=document.querySelectorAll("template"),f=0,h=j.length;h>f;f++)e=j[f],e.content=e.childNodes[0];for(this.re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.contactForm=document.querySelector(".contact-us"),d=this.contactForm.querySelectorAll("input, textarea"),this.textarea=this.contactForm.querySelector("textarea"),this.email=this.contactForm.querySelector("[name='email']"),this.skype=this.contactForm.querySelector("[name='skype']"),this.button=this.contactForm.querySelector("button"),this.contactForm.addEventListener("submit",this.sendMessage),this.email.addEventListener("change",this.testEmail),this.email.addEventListener("change",this.testContacts),this.skype.addEventListener("change",this.testContacts),this.textarea.addEventListener("keydown",this.delayedResize),this.textarea.addEventListener("cut",this.delayedResize),this.textarea.addEventListener("paste",this.delayedResize),this.textarea.addEventListener("drop",this.delayedResize),this.textarea.addEventListener("change",this.resizeTextarea),g=0,i=d.length;i>g;g++)c=d[g],c.addEventListener("keyup",this.changeTranslationURL);b=new a,b.setDefault(40),b.insertAfter(document.getElementById("donate"))}return b.prototype.sendMessage=function(a){return a.preventDefault(),this.testContacts()&&this.testEmail()?this.button.classList.add("loading"):void 0},b.prototype.hideErr=function(){return this.contactForm.classList.remove("email-err"),this.contactForm.classList.remove("contact-err")},b.prototype.testContacts=function(){var a=this;return 0===this.email.value.trim().length&&0===this.skype.value.trim().length?(this.contactForm.classList.add("contact-err"),this.contactForm.classList.remove("email-err"),window.setTimeout(function(){return a.hideErr()},5e3),!1):(this.contactForm.classList.remove("contact-err"),!0)},b.prototype.testEmail=function(){var a=this;return this.email.value.trim().length>0&&!this.re.test(this.email.value.trim())?(this.contactForm.classList.add("email-err"),this.contactForm.classList.remove("contact-err"),window.setTimeout(function(){return a.hideErr()},5e3),!1):(this.contactForm.classList.remove("email-err"),!0)},b.prototype.delayedResize=function(){var a=this;return window.setTimeout(function(){return a.resizeTextarea()},0)},b.prototype.resizeTextarea=function(){return this.textarea.style.height="0",this.textarea.style.height=this.textarea.scrollHeight+"px"},b.prototype.changeTranslationURL=function(a){var b;return b=a.currentTarget,b.value.trim().length>0?b.classList.add("non-empty"):b.classList.remove("non-empty")},b}()});